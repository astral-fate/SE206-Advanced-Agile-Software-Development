<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SE206 - Unit 2: Extreme Programming (XP)</title>
    <style>
        /* Paste the CSS from the SE205 unit1.html example here */
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 20px auto;
            padding: 30px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        h1, h2, h3 {
            color: #0056b3; /* Cairo University Blue */
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 15px;
        }

        h2 {
            margin-top: 20px; /* Reduced top margin for sections */
            margin-bottom: 20px;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 10px;
        }

        h3 {
            margin-top: 25px;
            margin-bottom: 15px;
            color: #007bff; /* Lighter Blue */
        }
         ul {
            list-style-type: disc;
            padding-left: 20px;
            margin-top: 10px;
        }
         li {
             margin-bottom: 8px;
         }
        code {
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            background-color: #e9ecef;
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 0.95em;
        }
        strong {
             color: #dc3545; /* Red emphasis */
        }

        /* Main Tabs Styles */
        .main-tabs {
            display: flex;
            justify-content: space-around; /* Or flex-start, center */
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            margin-bottom: 25px;
            border-bottom: 2px solid #0056b3;
        }

        .main-tabs .tab-button {
            padding: 12px 20px; /* Adjusted padding slightly */
            border: none;
            background: none;
            color: #0056b3;
            font-size: 0.95em; /* Slightly smaller font */
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            transition: background-color 0.3s ease, color 0.3s ease;
            margin-bottom: -2px; /* Overlap border */
            border-bottom: 2px solid transparent;
            text-align: center;
        }

        .main-tabs .tab-button.active {
            background: #0056b3;
            color: white;
            border-bottom: 2px solid #0056b3;
        }
        .main-tabs .tab-button:hover:not(.active) {
            background-color: #e9ecef;
            border-bottom: 2px solid #adb5bd;
        }

        /* Content Sections */
        .main-content {
            display: none; /* Hide all main content sections by default */
            animation: fadeIn 0.5s;
        }

        .main-content.active {
            display: block; /* Show only the active one */
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }


        /* --- Accordion Styles (for Glossary) --- */
        .glossary-accordion {
            border: 1px solid #dee2e6;
            border-radius: 5px;
            overflow: hidden; /* Contain borders */
        }

        .accordion-item {
            border-bottom: 1px solid #dee2e6; /* Separator */
        }
        .accordion-item:last-child {
            border-bottom: none;
        }

        .accordion-header {
            background-color: #f8f9fa;
            color: #dc3545; /* Highlight Red for terms */
            cursor: pointer;
            padding: 15px 20px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1.1em;
            font-weight: bold;
            transition: background-color 0.3s ease;
            position: relative; /* For the indicator */
        }

        .accordion-header:hover {
            background-color: #e9ecef;
        }

        /* Indicator (+/-) */
        .accordion-header::after {
            content: '\002B'; /* + sign */
            color: #0056b3;
            font-weight: bold;
            float: right;
            margin-left: 5px;
            transition: transform 0.2s ease-in-out;
        }

        .accordion-header.active::after {
            content: "\2212"; /* - sign */
            transform: rotate(180deg); /* Optional: animate the sign itself */
        }
        /* Optional: Slightly different style for active header */
        .accordion-header.active {
             background-color: #e7f1ff;
        }


        .accordion-panel {
            padding: 0 20px; /* Start with 0 padding top/bottom */
            background-color: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out; /* Smooth transition */
        }
        .accordion-panel p, .accordion-panel ul { /* Apply margin to lists too */
            margin: 15px 0; /* Add margin back when panel is open */
            color: #333; /* Reset color for definition */
        }

        /* --- End Accordion Styles --- */

        /* Concepts Section Styles */
        #concepts .concept-block {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 25px;
        }
         #concepts .concept-block h3 {
            margin-top: 0;
            color: #007bff;
            border-bottom: 1px dotted #ccc;
            padding-bottom: 8px;
            margin-bottom: 15px;
        }

        /* Quiz Styles (apply within #fill, #tf, #mc) */
        .question {
            margin-bottom: 25px;
            padding: 20px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            background-color: #ffffff; /* White background for questions */
            position: relative; /* For feedback positioning */
        }

        .question p {
            margin: 0 0 15px;
            font-weight: bold;
            font-size: 1.05em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-button {
            padding: 10px 15px;
            border: 1px solid #ced4da;
            background: #f8f9fa; /* Light background for options */
            color: #495057;
            cursor: pointer;
            border-radius: 5px;
            text-align: left;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            width: 100%;
        }
        .option-button:hover {
             background-color: #e9ecef;
             border-color: #adb5bd;
        }

        .option-button.selected {
            background: #007bff;
            color: white;
            border-color: #0056b3;
        }

        .check-answer {
            margin-top: 15px;
            padding: 10px 20px;
            border: none;
            background: #28a745; /* Success Green */
            color: white;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        .check-answer:hover {
             background-color: #218838;
        }

        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SE206 - Unit 2: Extreme Programming (XP)</h1>

        <!-- Main Tab Buttons -->
        <div class="main-tabs">
            <button class="tab-button active" data-tab="glossary">Glossary</button>
            <button class="tab-button" data-tab="concepts">Key Concepts</button>
            <button class="tab-button" data-tab="fill">Fill in the Blank</button>
            <button class="tab-button" data-tab="tf">True/False</button>
            <button class="tab-button" data-tab="mc">Multiple Choice</button>
        </div>

        <!-- Glossary Section (Accordion) -->
        <section id="glossary" class="main-content active">
            <h2>Glossary of Terms</h2>
            <div class="glossary-accordion">
                <!-- Add terms based on SE206 Unit 2 (XP) -->
                 <div class="accordion-item">
                    <button class="accordion-header">Acceptance Test</button>
                    <div class="accordion-panel">
                        <p>In XP, tests specified by the customer to check that a user story has been correctly implemented. All acceptance tests must pass for a story to be considered 'done'.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">Coach (XP Role)</button>
                    <div class="accordion-panel">
                        <p>An XP role responsible for teaching the team about XP practices, monitoring the process, and intervening if necessary. Often an experienced programmer.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Continuous Integration (CI)</button>
                    <div class="accordion-panel">
                        <p>An XP practice where developers integrate their code into a shared repository frequently, typically multiple times a day. Each integration is verified by an automated build (including tests) to detect integration errors quickly.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">CRC Cards</button>
                    <div class="accordion-panel">
                        <p>(Class-Responsibility-Collaboration) Cards. A brainstorming tool used in object-oriented design to help discover and document classes, their responsibilities, and their collaborations with other classes.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">Customer (XP Role)</button>
                    <div class="accordion-panel">
                        <p>An XP role, ideally an actual end-user or representative, who writes user stories and acceptance tests, prioritizes stories, and provides feedback. They are an integral part of the team.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">Daily Meeting / Stand-up</button>
                    <div class="accordion-panel">
                        <p>A short (often 15-minute) daily meeting where team members briefly report what they did yesterday, what they plan to do today, and any obstacles they face. Standing up helps keep the meeting brief.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Extreme Programming (XP)</button>
                    <div class="accordion-panel">
                        <p>An Agile software development framework focused on improving software quality and responsiveness to changing requirements through specific engineering practices and values.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Pair Programming</button>
                    <div class="accordion-panel">
                        <p>An XP practice where two programmers work together at one workstation. One (the driver) writes code while the other (the observer or navigator) reviews each line as it is typed, suggests improvements, and thinks strategically.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Programmer (XP Role)</button>
                    <div class="accordion-panel">
                        <p>An XP role responsible for writing tests, designing, coding, and refactoring the software. Programmers estimate tasks and stories.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Refactoring</button>
                    <div class="accordion-panel">
                        <p>The process of restructuring existing computer code—changing the factoring—without changing its external behavior. XP encourages frequent refactoring to keep the design simple and clean.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Slack (XP Practice)</button>
                    <div class="accordion-panel">
                        <p>Intentionally planning slightly less work for an iteration than the team's estimated capacity. This allows the team to finish early or absorb unexpected delays/tasks without jeopardizing the iteration goal.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">Stories / User Stories</button>
                    <div class="accordion-panel">
                        <p>Short, simple descriptions of a feature told from the perspective of the person who desires the new capability, usually a user or customer. Used in XP and other Agile methods to define requirements.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">Test-First Programming / TDD</button>
                    <div class="accordion-panel">
                        <p>(Test-Driven Development) An XP practice where developers write an automated test case *before* writing the production code needed to pass that test. This drives design and ensures testability.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">Tester (XP Role)</button>
                    <div class="accordion-panel">
                        <p>An XP role responsible for helping the customer write acceptance tests and for running tests regularly. May also be a programmer.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">Tracker (XP Role)</button>
                    <div class="accordion-panel">
                        <p>An XP role responsible for monitoring the team's progress (e.g., tracking user story completion, acceptance tests) and communicating status, often using visible wall graphs.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">XP Values</button>
                    <div class="accordion-panel">
                        <p>The core principles guiding XP practices: Communication, Simplicity, Feedback, Courage, and Respect.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">Weekly Cycle</button>
                    <div class="accordion-panel">
                        <p>An XP planning practice where, at the start of each week, the team meets to review progress, the customer selects stories for the week, and the team breaks stories into tasks.</p>
                    </div>
                </div>


            </div> <!-- End glossary-accordion -->
        </section>

        <!-- Key Concepts Section -->
        <section id="concepts" class="main-content">
            <h2>Key Concepts from Unit 2</h2>

            <div class="concept-block">
                <h3>Extreme Programming (XP) Overview</h3>
                <p>XP is an Agile methodology best suited for <strong>new or incomplete projects</strong> with changing requirements, typically used by <strong>small teams</strong> (2-12 members). It strongly focuses on the actual development process and engineering practices.</p>
            </div>

             <div class="concept-block">
                <h3>XP Lifecycle Phases</h3>
                <p>XP projects typically follow these phases:</p>
                <ul>
                    <li><strong>Exploration:</strong> Understanding requirements (stories), technology, and initial architecture.</li>
                    <li><strong>Planning:</strong> Prioritizing stories, estimating effort, planning releases (Release Planning).</li>
                    <li><strong>Iterations to Release:</strong> Developing in short cycles (iterations), including continuous review, integration, and testing.</li>
                    <li><strong>Productionizing:</strong> Preparing the system for deployment (final testing, documentation, performance tuning).</li>
                    <li><strong>Maintenance:</strong> Handling bug fixes and small enhancements post-release.</li>
                    <li><strong>Death:</strong> The end of the project (when customer needs are met, no more stories, or budget/time runs out).</li>
                </ul>
             </div>

             <div class="concept-block">
                <h3>XP Values</h3>
                 <p>These values underpin all XP practices:</p>
                 <ul>
                     <li><strong>Communication:</strong> Fostering positive and effective communication within the team and with the customer (e.g., Pair Programming, On-site Customer, Daily Meetings).</li>
                     <li><strong>Simplicity:</strong> Doing the simplest thing that could possibly work. Avoiding unnecessary complexity ("You Ain't Gonna Need It" - YAGNI).</li>
                     <li><strong>Feedback:</strong> Seeking rapid feedback from the system (tests), the customer, and the team.</li>
                     <li><strong>Courage:</strong> Making hard decisions, such as refactoring complex code, discarding failing approaches, or speaking up about problems.</li>
                     <li><strong>Respect:</strong> Team members respect each other, the customer, and the work.</li>
                 </ul>
             </div>

             <div class="concept-block">
                <h3>XP Roles</h3>
                 <p>XP defines several key roles:</p>
                 <ul>
                     <li><strong>Programmer:</strong> Writes tests, code, refactors, estimates.</li>
                     <li><strong>Customer:</strong> Writes stories & acceptance tests, prioritizes, provides feedback. (Crucial role, ideally on-site).</li>
                     <li><strong>Tester:</strong> Helps Customer write tests, runs tests, tracks defects.</li>
                     <li><strong>Tracker:</strong> Monitors progress (story/test completion), keeps metrics visible.</li>
                     <li><strong>Coach:</strong> Mentors team on XP, facilitates, ensures process is followed.</li>
                     <li><strong>Manager:</strong> Owns the team/problems, obtains resources, interfaces externally. (Less directive than traditional manager).</li>
                 </ul>
            </div>


             <div class="concept-block">
                <h3>Key XP Practices</h3>
                <p>XP is defined by its core practices:</p>
                <ul>
                    <li><strong>Sit Together (Whole Team):</strong> Entire team works in one open space to improve communication.</li>
                    <li><strong>Informative Workspace:</strong> Use visible charts, graphs, story cards on walls to show progress.</li>
                    <li><strong>Pair Programming:</strong> Two programmers, one computer. Improves quality and knowledge sharing.</li>
                    <li><strong>Stories (User Stories):</strong> Customer defines functionality in short, user-focused statements.</li>
                    <li><strong>Weekly Cycle:</strong> Plan the week's work based on customer priorities and developer estimates.</li>
                    <li><strong>Slack:</strong> Plan slightly less work than capacity to handle unexpected issues.</li>
                    <li><strong>Test-First Programming (TDD):</strong> Write automated tests *before* the code.</li>
                    <li><strong>Continuous Integration (CI):</strong> Integrate and build code frequently (many times a day).</li>
                    <li><strong>Daily Meetings (Stand-up):</strong> Quick daily sync-up on progress and impediments.</li>
                    <li>(Other practices include: Planning Game, Small Releases, Metaphor, Simple Design, Refactoring, Collective Code Ownership, Coding Standard, 40-Hour Week, On-Site Customer)</li>
                 </ul>
            </div>

            <div class="concept-block">
                <h3>XP Documents</h3>
                 <p>While valuing working software over comprehensive documentation, XP uses lightweight documents:</p>
                 <ul>
                     <li><strong>User Story Cards:</strong> Physical cards describing desired functionality.</li>
                     <li><strong>Task List:</strong> Breakdown of stories into technical tasks for an iteration.</li>
                     <li><strong>CRC Cards:</strong> Used during design brainstorming.</li>
                     <li><strong>Acceptance Test Cases:</strong> Defined by the customer to verify stories.</li>
                     <li><strong>Visible Wall Graphs:</strong> Track progress (e.g., Burndown charts - though more common in Scrum, Trackers use visual aids).</li>
                 </ul>
             </div>

        </section>

        <!-- Quiz Sections -->
        <div id="fill" class="main-content">
            <h2>Fill in the Blank Questions</h2>
            <div id="fill-questions"></div>
        </div>

        <div id="tf" class="main-content">
            <h2>True/False Questions</h2>
            <div id="tf-questions"></div>
        </div>

        <div id="mc" class="main-content">
            <h2>Multiple Choice Questions</h2>
            <div id="mc-questions"></div>
        </div>

    </div> <!-- End Container -->

    <script>
        // --- START OF QUIZ DATA (SE206 UNIT 2 - XP) ---
        const fillInTheBlank = [
            { question: "The XP practice where two programmers work together at one computer is called _______ Programming.", options: ["Solo", "Team", "Pair", "Buddy"], answer: "Pair" },
            { question: "In XP, requirements are often expressed as short descriptions from the user's perspective, known as User _______.", options: ["Cases", "Requirements", "Stories", "Scenarios"], answer: "Stories" },
            { question: "The XP value that encourages doing the simplest thing that works is called _______.", options: ["Communication", "Feedback", "Courage", "Simplicity"], answer: "Simplicity" },
            { question: "Writing automated tests *before* writing the code is the core idea of _______-First Programming.", options: ["Code", "Design", "Test", "Release"], answer: "Test" },
            { question: "Integrating code frequently into a shared repository, often multiple times a day, is known as _______ Integration.", options: ["Daily", "Weekly", "Continuous", "Manual"], answer: "Continuous" },
            { question: "The XP role responsible for writing stories and acceptance tests, and prioritizing work is the _______.", options: ["Programmer", "Coach", "Customer", "Tracker"], answer: "Customer" },
            { question: "_______ is the process of restructuring existing code without changing its external behavior, encouraged in XP.", options: ["Debugging", "Compiling", "Refactoring", "Testing"], answer: "Refactoring" },
            { question: "The XP practice of planning some lower-priority tasks that can be dropped if the team falls behind is called _______.", options: ["Overtime", "Padding", "Slack", "Buffer"], answer: "Slack" },
            { question: "The five core values of XP are Communication, Simplicity, Feedback, Courage, and _______.", options: ["Respect", "Quality", "Speed", "Planning"], answer: "Respect" },
             { question: "_______ Cards (Class-Responsibility-Collaboration) are a brainstorming tool used in XP for object-oriented design.", options: ["User", "Task", "Story", "CRC"], answer: "CRC" }
        ];

        const trueOrFalse = [
            { question: "XP is best suited for large, well-defined projects with stable requirements.", answer: false }, // Best for changing reqs, smaller teams
            { question: "In Pair Programming, both programmers write code simultaneously on separate keyboards.", answer: false }, // One driver, one navigator/observer
            { question: "XP values comprehensive documentation over working software.", answer: false }, // Values working software more
            { question: "Continuous Integration involves integrating code only once per week.", answer: false }, // Many times per day
            { question: "Test-First Programming means writing tests after the code is fully functional.", answer: false }, // Tests are written before
            { question: "The Customer role in XP is optional and often replaced by the Project Manager.", answer: false }, // Customer role is crucial and distinct
            { question: "Refactoring aims to change the external behavior of the code to add new features.", answer: false }, // Aims to improve internal structure without changing behavior
            { question: "XP encourages developers to work consistent 40-hour weeks to maintain a sustainable pace.", answer: true },
            { question: "The XP Coach is typically a manager responsible for assigning tasks.", answer: false }, // Typically a programmer, mentors on XP process
            { question: "User Stories in XP provide highly detailed technical specifications.", answer: false } // They are short, user-focused descriptions
        ];

        const multipleChoice = [
            { question: "Which of these is NOT one of the five core values of XP?", options: ["Simplicity", "Communication", "Planning", "Courage"], answer: "Planning" }, // Planning is a practice/phase, not a core value like Respect
            { question: "What XP practice involves writing automated test cases before the production code?", options: ["Continuous Integration", "Refactoring", "Test-First Programming", "Pair Programming"], answer: "Test-First Programming" },
            { question: "Who is primarily responsible for writing User Stories in XP?", options: ["Programmer", "Tester", "Customer", "Coach"], answer: "Customer" },
            { question: "What is the main purpose of Refactoring in XP?", options: ["To add new features quickly", "To fix bugs found in testing", "To improve the internal design of code", "To generate documentation"], answer: "To improve the internal design of code" },
            { question: "The XP practice of integrating code frequently throughout the day is called:", options: ["Daily Build", "Continuous Integration", "Weekly Cycle", "Release Integration"], answer: "Continuous Integration" },
            { question: "Which XP role monitors progress and keeps metrics visible, often using wall graphs?", options: ["Manager", "Coach", "Tracker", "Customer"], answer: "Tracker" },
            { question: "What does the 'Sit Together' practice in XP primarily aim to improve?", options: ["Code Quality", "Testing Speed", "Communication", "Customer Satisfaction"], answer: "Communication" },
            { question: "Which XP document type is a brainstorming tool for OO design?", options: ["User Story Card", "Task Card", "CRC Card", "Acceptance Test"], answer: "CRC Card" },
            { question: "The 'Weekly Cycle' in XP is primarily focused on:", options: ["Daily status updates", "Planning the work for the upcoming week", "Integrating all code developed", "Releasing software to the customer"], answer: "Planning the work for the upcoming week" },
            { question: "Which XP value supports making hard decisions like refactoring or challenging requirements?", options: ["Simplicity", "Feedback", "Communication", "Courage"], answer: "Courage" }
        ];
        // --- END OF QUIZ DATA ---

        // --- START OF SCRIPT LOGIC (PASTE FROM PREVIOUS EXAMPLE) ---
        document.addEventListener('DOMContentLoaded', () => {
            // Select main tabs and content sections
            const mainTabButtons = document.querySelectorAll('.main-tabs .tab-button');
            const mainTabContents = document.querySelectorAll('.main-content');

            // Select quiz content containers
            const fillContainer = document.getElementById('fill-questions');
            const tfContainer = document.getElementById('tf-questions');
            const mcContainer = document.getElementById('mc-questions');

             // Select accordion elements
            const accordionHeaders = document.querySelectorAll('.accordion-header');


            // --- Main Tab Switching Logic ---
            mainTabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab'); // Get the ID of the target content

                    // Deactivate all main buttons and content
                    mainTabButtons.forEach(btn => btn.classList.remove('active'));
                    mainTabContents.forEach(content => content.classList.remove('active'));

                    // Activate the clicked button
                    button.classList.add('active');

                    // Activate the corresponding content section
                    const targetContent = document.getElementById(tabId);
                    if (targetContent) {
                        targetContent.classList.add('active');
                    }
                });
            });

            // --- Accordion Logic (for Glossary) ---
             accordionHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    // Toggle active class on the header for styling (+) (-) sign
                    this.classList.toggle('active');

                    // Get the panel sibling
                    const panel = this.nextElementSibling;

                    // Toggle the max-height for smooth transition
                    if (panel.style.maxHeight) {
                        // If panel is open, close it
                        panel.style.maxHeight = null;
                        panel.style.padding = "0 20px"; // Remove padding when closing
                    } else {
                         // If panel is closed, open it
                        panel.style.maxHeight = panel.scrollHeight + 40 + "px"; // Add some buffer
                        panel.style.padding = "15px 20px"; // Add padding back when opening
                    }

                    // --- Optional: Close other accordions ---
                    accordionHeaders.forEach(otherHeader => {
                        if (otherHeader !== this && otherHeader.classList.contains('active')) {
                            otherHeader.classList.remove('active');
                            otherHeader.nextElementSibling.style.maxHeight = null;
                            otherHeader.nextElementSibling.style.padding = "0 20px";
                        }
                    });
                    // --- End Optional Close Others ---
                });
            });


            // --- Function to handle option selection within a question ---
            function handleOptionSelection(button, questionDiv) {
                // Deselect siblings within the same question
                const siblings = questionDiv.querySelectorAll('.option-button.selected');
                siblings.forEach(sib => sib.classList.remove('selected'));
                // Select clicked button
                button.classList.add('selected');
                 // Clear previous feedback when a new option is selected
                const existingFeedback = questionDiv.querySelector('.feedback');
                if (existingFeedback) {
                    existingFeedback.remove();
                }
            }

            // --- Function to create and append feedback ---
            function showFeedback(questionDiv, isCorrect, correctAnswer) {
                 // Remove existing feedback first
                const existingFeedback = questionDiv.querySelector('.feedback');
                if (existingFeedback) {
                    existingFeedback.remove();
                }

                const feedback = document.createElement('div');
                feedback.className = 'feedback';
                if (isCorrect) {
                    feedback.classList.add('correct');
                    feedback.textContent = 'Correct!';
                } else {
                    feedback.classList.add('incorrect');
                     // For T/F, explicitly show the boolean value
                     let displayAnswer = correctAnswer;
                     if (typeof correctAnswer === 'boolean') {
                         displayAnswer = correctAnswer ? 'True' : 'False';
                     }
                    feedback.textContent = `Incorrect. Correct answer: ${displayAnswer}`;
                }
                // Append feedback after the check button
                const checkButton = questionDiv.querySelector('.check-answer');
                 if (checkButton) {
                    // Insert after the check button if it exists
                    checkButton.parentNode.insertBefore(feedback, checkButton.nextSibling);
                } else {
                     // Otherwise, append to the end of the question div
                     questionDiv.appendChild(feedback);
                }
            }

            // --- Load Fill in the Blank Questions ---
            function loadFillInTheBlankQuestions() {
                fillContainer.innerHTML = ''; // Clear previous content
                fillInTheBlank.forEach((q, index) => { // Added index for unique IDs if needed
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    questionDiv.id = `fill-q-${index}`;

                    const questionText = document.createElement('p');
                    // Find the blank spot indicated by _______ and replace it for display
                    questionText.innerHTML = q.question.replace('_______', '<span style="color: #007bff; font-weight:bold;">_______</span>');
                    questionDiv.appendChild(questionText);

                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';

                    // Shuffle options for variety (optional)
                    const shuffledOptions = [...q.options].sort(() => Math.random() - 0.5);


                    shuffledOptions.forEach(option => { // Use shuffled options
                        const optionButton = document.createElement('button');
                        optionButton.className = 'option-button';
                        optionButton.textContent = option;
                        optionButton.addEventListener('click', () => handleOptionSelection(optionButton, questionDiv));
                        optionsDiv.appendChild(optionButton);
                    });
                    questionDiv.appendChild(optionsDiv);

                    const checkButton = document.createElement('button');
                    checkButton.className = 'check-answer';
                    checkButton.textContent = 'Check Answer';
                    checkButton.addEventListener('click', () => {
                        const selected = questionDiv.querySelector('.option-button.selected');
                        if (selected) {
                            showFeedback(questionDiv, selected.textContent === q.answer, q.answer);
                        } else {
                             // Optionally show feedback that an answer must be selected
                             showFeedback(questionDiv, false, q.answer); // Or provide specific feedback
                        }
                    });
                    questionDiv.appendChild(checkButton);

                    fillContainer.appendChild(questionDiv);
                });
            }


            // --- Load True/False Questions ---
            function loadTrueFalseQuestions() {
                tfContainer.innerHTML = ''; // Clear previous content
                trueOrFalse.forEach((q, index) => { // Added index
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    questionDiv.id = `tf-q-${index}`;

                    const questionText = document.createElement('p');
                    questionText.textContent = q.question;
                    questionDiv.appendChild(questionText);

                     const optionsDiv = document.createElement('div'); // Keep consistent structure
                    optionsDiv.className = 'options';

                    const trueButton = document.createElement('button');
                    trueButton.className = 'option-button';
                    trueButton.textContent = 'True';
                    trueButton.addEventListener('click', () => handleOptionSelection(trueButton, questionDiv));
                    optionsDiv.appendChild(trueButton);

                    const falseButton = document.createElement('button');
                    falseButton.className = 'option-button';
                    falseButton.textContent = 'False';
                    falseButton.addEventListener('click', () => handleOptionSelection(falseButton, questionDiv));
                    optionsDiv.appendChild(falseButton);

                    questionDiv.appendChild(optionsDiv);

                    const checkButton = document.createElement('button');
                    checkButton.className = 'check-answer';
                    checkButton.textContent = 'Check Answer';
                    checkButton.addEventListener('click', () => {
                        const selected = questionDiv.querySelector('.option-button.selected');
                        if (selected) {
                            // Check boolean answer correctly
                            const isCorrect = (selected.textContent === 'True' && q.answer === true) || (selected.textContent === 'False' && q.answer === false);
                            showFeedback(questionDiv, isCorrect, q.answer); // Pass boolean directly
                        } else {
                            showFeedback(questionDiv, false, q.answer); // Pass boolean directly
                        }
                    });
                    questionDiv.appendChild(checkButton);

                    tfContainer.appendChild(questionDiv);
                });
            }

            // --- Load Multiple Choice Questions ---
            function loadMultipleChoiceQuestions() {
                mcContainer.innerHTML = ''; // Clear previous content
                multipleChoice.forEach((q, index) => { // Added index
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    questionDiv.id = `mc-q-${index}`;

                    const questionText = document.createElement('p');
                    questionText.textContent = q.question;
                    questionDiv.appendChild(questionText);

                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';

                    // Shuffle options for variety (optional)
                    const shuffledOptions = [...q.options].sort(() => Math.random() - 0.5);

                    shuffledOptions.forEach(option => { // Use shuffled options
                        const optionButton = document.createElement('button');
                        optionButton.className = 'option-button';
                        optionButton.textContent = option;
                        optionButton.addEventListener('click', () => handleOptionSelection(optionButton, questionDiv));
                        optionsDiv.appendChild(optionButton);
                    });
                    questionDiv.appendChild(optionsDiv);

                    const checkButton = document.createElement('button');
                    checkButton.className = 'check-answer';
                    checkButton.textContent = 'Check Answer';
                    checkButton.addEventListener('click', () => {
                        const selected = questionDiv.querySelector('.option-button.selected');
                        if (selected) {
                            showFeedback(questionDiv, selected.textContent === q.answer, q.answer);
                        } else {
                             showFeedback(questionDiv, false, q.answer);
                        }
                    });
                    questionDiv.appendChild(checkButton);

                    mcContainer.appendChild(questionDiv);
                });
            }

            // --- Initial Load ---
            // Load all quiz questions initially so they are ready when tabs are clicked
            loadFillInTheBlankQuestions();
            loadTrueFalseQuestions();
            loadMultipleChoiceQuestions();


        }); // End DOMContentLoaded
        // --- END OF SCRIPT LOGIC ---
    </script>
</body>
</html>
