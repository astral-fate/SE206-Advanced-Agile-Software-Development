<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SE206 - Unit 4: Agile Effort Estimation</title>
    <style>
        /* Paste the CSS from the SE205 unit1.html example here */
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 20px auto;
            padding: 30px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        h1, h2, h3 {
            color: #0056b3; /* Cairo University Blue */
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 15px;
        }

        h2 {
            margin-top: 20px; /* Reduced top margin for sections */
            margin-bottom: 20px;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 10px;
        }

        h3 {
            margin-top: 25px;
            margin-bottom: 15px;
            color: #007bff; /* Lighter Blue */
        }
         ul {
            list-style-type: disc;
            padding-left: 20px;
            margin-top: 10px;
        }
         li {
             margin-bottom: 8px;
         }
        code {
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            background-color: #e9ecef;
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 0.95em;
        }
        strong {
             color: #dc3545; /* Red emphasis */
        }

        /* Main Tabs Styles */
        .main-tabs {
            display: flex;
            justify-content: space-around; /* Or flex-start, center */
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            margin-bottom: 25px;
            border-bottom: 2px solid #0056b3;
        }

        .main-tabs .tab-button {
            padding: 12px 20px; /* Adjusted padding slightly */
            border: none;
            background: none;
            color: #0056b3;
            font-size: 0.95em; /* Slightly smaller font */
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            transition: background-color 0.3s ease, color 0.3s ease;
            margin-bottom: -2px; /* Overlap border */
            border-bottom: 2px solid transparent;
            text-align: center;
        }

        .main-tabs .tab-button.active {
            background: #0056b3;
            color: white;
            border-bottom: 2px solid #0056b3;
        }
        .main-tabs .tab-button:hover:not(.active) {
            background-color: #e9ecef;
            border-bottom: 2px solid #adb5bd;
        }

        /* Content Sections */
        .main-content {
            display: none; /* Hide all main content sections by default */
            animation: fadeIn 0.5s;
        }

        .main-content.active {
            display: block; /* Show only the active one */
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }


        /* --- Accordion Styles (for Glossary) --- */
        .glossary-accordion {
            border: 1px solid #dee2e6;
            border-radius: 5px;
            overflow: hidden; /* Contain borders */
        }

        .accordion-item {
            border-bottom: 1px solid #dee2e6; /* Separator */
        }
        .accordion-item:last-child {
            border-bottom: none;
        }

        .accordion-header {
            background-color: #f8f9fa;
            color: #dc3545; /* Highlight Red for terms */
            cursor: pointer;
            padding: 15px 20px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1.1em;
            font-weight: bold;
            transition: background-color 0.3s ease;
            position: relative; /* For the indicator */
        }

        .accordion-header:hover {
            background-color: #e9ecef;
        }

        /* Indicator (+/-) */
        .accordion-header::after {
            content: '\002B'; /* + sign */
            color: #0056b3;
            font-weight: bold;
            float: right;
            margin-left: 5px;
            transition: transform 0.2s ease-in-out;
        }

        .accordion-header.active::after {
            content: "\2212"; /* - sign */
            transform: rotate(180deg); /* Optional: animate the sign itself */
        }
        /* Optional: Slightly different style for active header */
        .accordion-header.active {
             background-color: #e7f1ff;
        }


        .accordion-panel {
            padding: 0 20px; /* Start with 0 padding top/bottom */
            background-color: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out; /* Smooth transition */
        }
        .accordion-panel p, .accordion-panel ul { /* Apply margin to lists too */
            margin: 15px 0; /* Add margin back when panel is open */
            color: #333; /* Reset color for definition */
        }

        /* --- End Accordion Styles --- */

        /* Concepts Section Styles */
        #concepts .concept-block {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 25px;
        }
         #concepts .concept-block h3 {
            margin-top: 0;
            color: #007bff;
            border-bottom: 1px dotted #ccc;
            padding-bottom: 8px;
            margin-bottom: 15px;
        }

        /* Quiz Styles (apply within #fill, #tf, #mc) */
        .question {
            margin-bottom: 25px;
            padding: 20px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            background-color: #ffffff; /* White background for questions */
            position: relative; /* For feedback positioning */
        }

        .question p {
            margin: 0 0 15px;
            font-weight: bold;
            font-size: 1.05em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-button {
            padding: 10px 15px;
            border: 1px solid #ced4da;
            background: #f8f9fa; /* Light background for options */
            color: #495057;
            cursor: pointer;
            border-radius: 5px;
            text-align: left;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            width: 100%;
        }
        .option-button:hover {
             background-color: #e9ecef;
             border-color: #adb5bd;
        }

        .option-button.selected {
            background: #007bff;
            color: white;
            border-color: #0056b3;
        }

        .check-answer {
            margin-top: 15px;
            padding: 10px 20px;
            border: none;
            background: #28a745; /* Success Green */
            color: white;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        .check-answer:hover {
             background-color: #218838;
        }

        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SE206 - Unit 4: Agile Effort Estimation</h1>

        <!-- Main Tab Buttons -->
        <div class="main-tabs">
            <button class="tab-button active" data-tab="glossary">Glossary</button>
            <button class="tab-button" data-tab="concepts">Key Concepts</button>
            <button class="tab-button" data-tab="fill">Fill in the Blank</button>
            <button class="tab-button" data-tab="tf">True/False</button>
            <button class="tab-button" data-tab="mc">Multiple Choice</button>
        </div>

        <!-- Glossary Section (Accordion) -->
        <section id="glossary" class="main-content active">
            <h2>Glossary of Terms</h2>
            <div class="glossary-accordion">
                <!-- Add terms based on SE206 Unit 4 (Estimation) -->
                <div class="accordion-item">
                    <button class="accordion-header">COCOMO</button>
                    <div class="accordion-panel">
                        <p>(Constructive Cost Model) A procedural software cost estimation model. COCOMO I (Basic, Intermediate, Detailed) and COCOMO II are prominent versions, using parameters like project size (LOC/FP) and cost drivers.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Cost Driver</button>
                    <div class="accordion-panel">
                        <p>In COCOMO, factors that affect the effort required to complete a software project, such as required reliability, database size, personnel capability, tool use, etc. Each driver has a rating and associated effort multiplier.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Defuzzification</button>
                    <div class="accordion-panel">
                        <p>The process of converting a fuzzy output set (resulting from fuzzy inference) into a single crisp numerical value, often used in control systems or decision making (e.g., Center of Area method).</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">Effort Estimation</button>
                    <div class="accordion-panel">
                        <p>The process of predicting the amount of effort (typically in person-months or person-hours) required to develop or maintain software. Used for budgeting, planning, and risk analysis.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Fibonacci Sequence</button>
                    <div class="accordion-panel">
                        <p>A sequence of numbers where each number is the sum of the two preceding ones, usually starting with 0 and 1 (e.g., 0, 1, 1, 2, 3, 5, 8, 13...). Often used for Story Point scales in Agile estimation because the increasing gaps reflect increasing uncertainty.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">Fuzzy Logic</button>
                    <div class="accordion-panel">
                        <p>A form of many-valued logic dealing with reasoning that is approximate rather than fixed and exact. It uses "degrees of truth" (membership functions) rather than Boolean true/false. Used here to handle the imprecision in estimation factors.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Fuzzy Inference System (FIS)</button>
                    <div class="accordion-panel">
                        <p>A system based on fuzzy set theory, fuzzy if-then rules, and fuzzy reasoning. Maps inputs to outputs using fuzzy logic.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">MATLAB</button>
                    <div class="accordion-panel">
                        <p>A high-level language and interactive environment for numerical computation, visualization, and programming. Often used for developing algorithms, including fuzzy inference systems.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">MRE (Magnitude of Relative Error)</button>
                    <div class="accordion-panel">
                        <p>A metric used to measure the accuracy of an estimation model. Calculated as the absolute difference between the actual and predicted values, divided by the actual value. `MRE = |Actual - Predicted| / Actual`.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Planning Poker</button>
                    <div class="accordion-panel">
                        <p>A consensus-based Agile estimation technique, commonly used for estimating Story Points. Team members privately select estimate cards (often Fibonacci), then reveal simultaneously and discuss discrepancies until consensus is reached.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">PRED(L)</button>
                    <div class="accordion-panel">
                        <p>(Prediction Level) A metric indicating the percentage of projects whose estimates fall within a certain MRE level (L). For example, PRED(0.25) is the percentage of projects with MRE less than or equal to 0.25 (25%).</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Scaling Factor (COCOMO II)</button>
                    <div class="accordion-panel">
                        <p>In COCOMO II, five factors (Precedentedness, Flexibility, Risk Resolution, Team Cohesion, Process Maturity) that influence the exponent in the effort equation, reflecting economies or diseconomies of scale.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header">Story Point</button>
                    <div class="accordion-panel">
                        <p>A relative unit of measure used in Agile development for estimating the overall effort required to fully implement a product backlog item or any other piece of work. Considers complexity, uncertainty, and amount of work.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">Velocity</button>
                    <div class="accordion-panel">
                        <p>In Agile, a measure of the amount of work (typically in Story Points) a team can complete during a single iteration (Sprint). Used for planning future iterations.</p>
                    </div>
                </div>

            </div> <!-- End glossary-accordion -->
        </section>

        <!-- Key Concepts Section -->
        <section id="concepts" class="main-content">
            <h2>Key Concepts from Unit 4</h2>

            <div class="concept-block">
                <h3>Need for Effort Estimation</h3>
                <p>Software effort estimation is crucial for:</p>
                <ul>
                    <li><strong>Budgeting:</strong> Determining project costs.</li>
                    <li><strong>Trade-off and Risk Analysis:</strong> Evaluating different approaches.</li>
                    <li><strong>Project Planning and Control:</strong> Scheduling and tracking progress.</li>
                    <li><strong>Investment Analysis:</strong> Justifying software improvement initiatives.</li>
                </ul>
            </div>

            <div class="concept-block">
                <h3>Challenges in Large-Scale Agile</h3>
                <p>Scaling Agile methods presents challenges:</p>
                <ul>
                    <li>Interfacing with other organizational units (HR, Marketing).</li>
                    <li>Lack of sufficient architecture planning upfront.</li>
                    <li>Coordination overhead between teams.</li>
                    <li>Difficulty discovering detailed dependencies early.</li>
                    <li>Managing requirements priority lists.</li>
                    <li>Continuous testing and increased maintenance needs.</li>
                </ul>
            </div>

             <div class="concept-block">
                <h3>COCOMO (Constructive Cost Model)</h3>
                <p>A widely used algorithmic cost estimation model.</p>
                <ul>
                    <li>Predicts <strong>effort</strong> (person-months) and <strong>duration</strong> based on project <strong>size</strong> (e.g., KLOC - Thousands of Lines of Code) and various <strong>cost drivers</strong>.</li>
                    <li><strong>COCOMO I Models:</strong>
                        <ul>
                            <li><strong>Basic:</strong> Simple calculation based on size and project type (Organic, Semi-detached, Embedded).</li>
                            <li><strong>Intermediate:</strong> Refines Basic model by incorporating 15 cost drivers (e.g., Reliability, Complexity, Capability). Effort = Nominal Effort x EAF (Effort Adjustment Factor derived from drivers).</li>
                            <li><strong>Detailed:</strong> Applies drivers at the phase level (not covered in detail here).</li>
                        </ul>
                    </li>
                    <li><strong>COCOMO II:</strong> Updated model addressing modern practices. Includes <strong>Scaling Factors</strong> (e.g., Precedentedness, Team Cohesion) affecting the size exponent and revised cost drivers. Has sub-models like Early Design and Post-Architecture.</li>
                    <li><strong>Imprecision Problem:</strong> Cost driver ratings are often subjective ranges (e.g., Low, Nominal, High), leading to potential inaccuracies.</li>
                 </ul>
             </div>

             <div class="concept-block">
                <h3>Story Points</h3>
                 <p>An Agile estimation technique focusing on relative sizing:</p>
                 <ul>
                     <li>Measures the overall effort (complexity, uncertainty, volume) of a user story.</li>
                     <li>Uses a relative scale, often the <strong>Fibonacci sequence</strong> (1, 2, 3, 5, 8, 13...) to reflect increasing uncertainty.</li>
                     <li>Team typically uses <strong>Planning Poker</strong> to reach consensus on story point estimates.</li>
                     <li><strong>Velocity:</strong> The number of story points a team typically completes per iteration, used for forecasting.</li>
                 </ul>
             </div>

             <div class="concept-block">
                <h3>Proposed Framework (Using Fuzzy Logic)</h3>
                <p>The presented research proposes a hybrid approach to improve estimation accuracy:</p>
                 <ul>
                     <li>Combines <strong>Story Points</strong> with <strong>COCOMO II Cost Drivers</strong>.</li>
                     <li>Addresses COCOMO's imprecision using <strong>Fuzzy Logic</strong>:
                         <ul>
                            <li>Cost drivers and scaling factors are represented as fuzzy sets with membership functions (e.g., using triangular shapes for Low, Nominal, High).</li>
                            <li>Uses a <strong>Fuzzy Inference System</strong> (FIS) with IF-THEN rules.</li>
                            <li>Applies <strong>Defuzzification</strong> (e.g., Center of Area - COA) to get crisp outputs for Effort Adjustment Factors (EAF) or Velocity factors.</li>
                         </ul>
                     </li>
                     <li><strong>Models:</strong>
                        <ul>
                            <li><strong>EEEM (Early Effort Estimation Model):</strong> For preliminary estimation using fuzzy COCOMO II scaling factors and cost drivers.</li>
                            <li><strong>IEEM (Iteration Effort Estimation Model):</strong> For iterative estimation, using fuzzy velocity factors (FR/DF) and potentially adjusted COCOMO factors based on iteration details. Calculates Iteration Story Points (ISP).</li>
                        </ul>
                     </li>
                 </ul>
            </div>

            <div class="concept-block">
                <h3>Evaluation Metrics</h3>
                 <p>Used to assess the accuracy of estimation models:</p>
                 <ul>
                     <li><strong>MRE (Magnitude of Relative Error):</strong> Measures the percentage error for a single project estimate: `|Actual - Predicted| / Actual`.</li>
                     <li><strong>PRED(L):</strong> Measures the percentage of projects whose MRE is less than or equal to a specific level L (e.g., PRED(0.25) for estimates within 25% accuracy). Higher PRED values indicate better model accuracy.</li>
                 </ul>
             </div>

        </section>

        <!-- Quiz Sections -->
        <div id="fill" class="main-content">
            <h2>Fill in the Blank Questions</h2>
            <div id="fill-questions"></div>
        </div>

        <div id="tf" class="main-content">
            <h2>True/False Questions</h2>
            <div id="tf-questions"></div>
        </div>

        <div id="mc" class="main-content">
            <h2>Multiple Choice Questions</h2>
            <div id="mc-questions"></div>
        </div>

    </div> <!-- End Container -->

    <script>
        // --- START OF QUIZ DATA (SE206 UNIT 4 - Estimation) ---
        const fillInTheBlank = [
            { question: "COCOMO stands for _______ Cost Model.", options: ["Constructive", "Complex", "Component", "Calculated"], answer: "Constructive" },
            { question: "In Agile estimation, _______ Points are relative units measuring effort, complexity, and uncertainty.", options: ["Function", "Complexity", "Story", "Task"], answer: "Story" },
            { question: "The COCOMO model predicts project effort and _______ based on size and cost drivers.", options: ["Cost", "Risk", "Duration", "Quality"], answer: "Duration" },
            { question: "Factors like Required Reliability and Programmer Capability in COCOMO are known as _______ drivers.", options: ["Effort", "Scale", "Cost", "Risk"], answer: "Cost" },
            { question: "A common technique for consensus-based Story Point estimation in Agile teams is Planning _______.", options: ["Poker", "Poker", "Meeting", "Game"], answer: "Poker" }, // Duplicate Poker intentional for demo
            { question: "_______ Logic deals with approximate reasoning using degrees of truth rather than simple true/false.", options: ["Boolean", "Predicate", "Fuzzy", "Formal"], answer: "Fuzzy" },
            { question: "The metric measuring the percentage error of an estimate is MRE, which stands for Magnitude of _______ Error.", options: ["Relative", "Residual", "Random", "Regression"], answer: "Relative" },
            { question: "The _______ sequence (e.g., 1, 2, 3, 5, 8) is often used for Story Point scales.", options: ["Arithmetic", "Geometric", "Fibonacci", "Prime"], answer: "Fibonacci" },
            { question: "COCOMO II introduced _______ Factors like Team Cohesion to account for economies of scale.", options: ["Cost", "Effort", "Scaling", "Risk"], answer: "Scaling" },
            { question: "The process of converting a fuzzy output into a crisp numerical value is called _______.", options: ["Fuzzification", "Inference", "Aggregation", "Defuzzification"], answer: "Defuzzification" }
        ];

        const trueOrFalse = [
            { question: "Story Points represent the exact number of hours a task will take.", answer: false }, // They are relative effort units
            { question: "COCOMO is primarily used for estimating the number of bugs in a software project.", answer: false }, // Used for effort and duration
            { question: "Fuzzy logic is used in the proposed framework to handle the precise nature of COCOMO cost drivers.", answer: false }, // Used to handle the *imprecision*
            { question: "Planning Poker involves developers bidding actual costs for user stories.", answer: false }, // Uses relative points, consensus-based
            { question: "A higher PRED(0.25) value indicates a more accurate estimation model.", answer: true },
            { question: "COCOMO II uses the same cost drivers and scaling factors as COCOMO I.", answer: false }, // COCOMO II updated/added factors
            { question: "Agile methods completely eliminate the need for any effort estimation.", answer: false }, // Estimation is still needed for planning
            { question: "Velocity in Agile refers to the speed at which code is written.", answer: false }, // Refers to amount of work (Story Points) completed per iteration
            { question: "Large-scale Agile projects face no additional challenges compared to small ones.", answer: false }, // Face many challenges like coordination, architecture
            { question: "The Basic COCOMO model requires detailed input about 15 different cost drivers.", answer: false } // Intermediate COCOMO uses the 15 drivers; Basic is simpler
        ];

        const multipleChoice = [
            { question: "Which estimation technique uses relative sizing often based on the Fibonacci sequence?", options: ["Function Point Analysis", "COCOMO", "Story Points", "Lines of Code Counting"], answer: "Story Points" },
            { question: "In the COCOMO model, what does EAF (Effort Adjustment Factor) depend on?", options: ["Project Size (KLOC)", "Project Type (Organic/Semi-Detached/Embedded)", "Cost Drivers", "Scaling Factors"], answer: "Cost Drivers" },
            { question: "What problem does the use of Fuzzy Logic aim to address in the proposed estimation framework?", options: ["Slow calculation speed", "Imprecision in input factors", "Lack of cost drivers", "Incompatibility with Story Points"], answer: "Imprecision in input factors" },
            { question: "What metric represents the percentage of projects estimated within a certain accuracy level (e.g., 25%)?", options: ["MRE", "COCOMO EAF", "Story Point Velocity", "PRED(L)"], answer: "PRED(L)" },
            { question: "Which of the following is a COCOMO II Scaling Factor?", options: ["Required Reliability (RELY)", "Programmer Capability (PCAP)", "Team Cohesion (TEAM)", "Database Size (DATA)"], answer: "Team Cohesion (TEAM)" },
            { question: "Planning Poker is primarily used for:", options: ["Determining project duration", "Assigning tasks to developers", "Consensus-based estimation of Story Points", "Calculating project budget"], answer: "Consensus-based estimation of Story Points" },
            { question: "What is 'Velocity' used for in Agile project planning?", options: ["Measuring individual programmer speed", "Calculating exact task duration in hours", "Forecasting how much work the team can do per iteration", "Determining the number of bugs fixed"], answer: "Forecasting how much work the team can do per iteration" },
            { question: "Which COCOMO model is the simplest, primarily using size and project type?", options: ["Basic COCOMO", "Intermediate COCOMO", "Detailed COCOMO", "COCOMO II Post-Architecture"], answer: "Basic COCOMO" },
            { question: "The process step `Effort = A * (Size)^B` belongs to which estimation model?", options: ["Story Point Calculation", "Fuzzy Logic Inference", "Basic COCOMO", "PERT Estimation"], answer: "Basic COCOMO" },
            { question: "Which is a common challenge specifically mentioned for Large-Scale Agile projects?", options: ["Lack of customer feedback", "Difficulty in coordination between teams", "Inability to use iterations", "Absence of planning"], answer: "Difficulty in coordination between teams" }
        ];
        // --- END OF QUIZ DATA ---

        // --- START OF SCRIPT LOGIC (PASTE FROM PREVIOUS EXAMPLE) ---
        document.addEventListener('DOMContentLoaded', () => {
            // Select main tabs and content sections
            const mainTabButtons = document.querySelectorAll('.main-tabs .tab-button');
            const mainTabContents = document.querySelectorAll('.main-content');

            // Select quiz content containers
            const fillContainer = document.getElementById('fill-questions');
            const tfContainer = document.getElementById('tf-questions');
            const mcContainer = document.getElementById('mc-questions');

             // Select accordion elements
            const accordionHeaders = document.querySelectorAll('.accordion-header');


            // --- Main Tab Switching Logic ---
            mainTabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab'); // Get the ID of the target content

                    // Deactivate all main buttons and content
                    mainTabButtons.forEach(btn => btn.classList.remove('active'));
                    mainTabContents.forEach(content => content.classList.remove('active'));

                    // Activate the clicked button
                    button.classList.add('active');

                    // Activate the corresponding content section
                    const targetContent = document.getElementById(tabId);
                    if (targetContent) {
                        targetContent.classList.add('active');
                    }
                });
            });

            // --- Accordion Logic (for Glossary) ---
             accordionHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    // Toggle active class on the header for styling (+) (-) sign
                    this.classList.toggle('active');

                    // Get the panel sibling
                    const panel = this.nextElementSibling;

                    // Toggle the max-height for smooth transition
                    if (panel.style.maxHeight) {
                        // If panel is open, close it
                        panel.style.maxHeight = null;
                        panel.style.padding = "0 20px"; // Remove padding when closing
                    } else {
                         // If panel is closed, open it
                        panel.style.maxHeight = panel.scrollHeight + 40 + "px"; // Add some buffer
                        panel.style.padding = "15px 20px"; // Add padding back when opening
                    }

                    // --- Optional: Close other accordions ---
                    accordionHeaders.forEach(otherHeader => {
                        if (otherHeader !== this && otherHeader.classList.contains('active')) {
                            otherHeader.classList.remove('active');
                            otherHeader.nextElementSibling.style.maxHeight = null;
                            otherHeader.nextElementSibling.style.padding = "0 20px";
                        }
                    });
                    // --- End Optional Close Others ---
                });
            });


            // --- Function to handle option selection within a question ---
            function handleOptionSelection(button, questionDiv) {
                // Deselect siblings within the same question
                const siblings = questionDiv.querySelectorAll('.option-button.selected');
                siblings.forEach(sib => sib.classList.remove('selected'));
                // Select clicked button
                button.classList.add('selected');
                 // Clear previous feedback when a new option is selected
                const existingFeedback = questionDiv.querySelector('.feedback');
                if (existingFeedback) {
                    existingFeedback.remove();
                }
            }

            // --- Function to create and append feedback ---
            function showFeedback(questionDiv, isCorrect, correctAnswer) {
                 // Remove existing feedback first
                const existingFeedback = questionDiv.querySelector('.feedback');
                if (existingFeedback) {
                    existingFeedback.remove();
                }

                const feedback = document.createElement('div');
                feedback.className = 'feedback';
                if (isCorrect) {
                    feedback.classList.add('correct');
                    feedback.textContent = 'Correct!';
                } else {
                    feedback.classList.add('incorrect');
                     // For T/F, explicitly show the boolean value
                     let displayAnswer = correctAnswer;
                     if (typeof correctAnswer === 'boolean') {
                         displayAnswer = correctAnswer ? 'True' : 'False';
                     }
                    feedback.textContent = `Incorrect. Correct answer: ${displayAnswer}`;
                }
                // Append feedback after the check button
                const checkButton = questionDiv.querySelector('.check-answer');
                 if (checkButton) {
                    // Insert after the check button if it exists
                    checkButton.parentNode.insertBefore(feedback, checkButton.nextSibling);
                } else {
                     // Otherwise, append to the end of the question div
                     questionDiv.appendChild(feedback);
                }
            }

            // --- Load Fill in the Blank Questions ---
            function loadFillInTheBlankQuestions() {
                fillContainer.innerHTML = ''; // Clear previous content
                fillInTheBlank.forEach((q, index) => { // Added index for unique IDs if needed
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    questionDiv.id = `fill-q-${index}`;

                    const questionText = document.createElement('p');
                    // Find the blank spot indicated by _______ and replace it for display
                    questionText.innerHTML = q.question.replace('_______', '<span style="color: #007bff; font-weight:bold;">_______</span>');
                    questionDiv.appendChild(questionText);

                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';

                    // Shuffle options for variety (optional)
                    const shuffledOptions = [...q.options].sort(() => Math.random() - 0.5);


                    shuffledOptions.forEach(option => { // Use shuffled options
                        const optionButton = document.createElement('button');
                        optionButton.className = 'option-button';
                        optionButton.textContent = option;
                        optionButton.addEventListener('click', () => handleOptionSelection(optionButton, questionDiv));
                        optionsDiv.appendChild(optionButton);
                    });
                    questionDiv.appendChild(optionsDiv);

                    const checkButton = document.createElement('button');
                    checkButton.className = 'check-answer';
                    checkButton.textContent = 'Check Answer';
                    checkButton.addEventListener('click', () => {
                        const selected = questionDiv.querySelector('.option-button.selected');
                        if (selected) {
                            showFeedback(questionDiv, selected.textContent === q.answer, q.answer);
                        } else {
                             // Optionally show feedback that an answer must be selected
                             showFeedback(questionDiv, false, q.answer); // Or provide specific feedback
                        }
                    });
                    questionDiv.appendChild(checkButton);

                    fillContainer.appendChild(questionDiv);
                });
            }


            // --- Load True/False Questions ---
            function loadTrueFalseQuestions() {
                tfContainer.innerHTML = ''; // Clear previous content
                trueOrFalse.forEach((q, index) => { // Added index
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    questionDiv.id = `tf-q-${index}`;

                    const questionText = document.createElement('p');
                    questionText.textContent = q.question;
                    questionDiv.appendChild(questionText);

                     const optionsDiv = document.createElement('div'); // Keep consistent structure
                    optionsDiv.className = 'options';

                    const trueButton = document.createElement('button');
                    trueButton.className = 'option-button';
                    trueButton.textContent = 'True';
                    trueButton.addEventListener('click', () => handleOptionSelection(trueButton, questionDiv));
                    optionsDiv.appendChild(trueButton);

                    const falseButton = document.createElement('button');
                    falseButton.className = 'option-button';
                    falseButton.textContent = 'False';
                    falseButton.addEventListener('click', () => handleOptionSelection(falseButton, questionDiv));
                    optionsDiv.appendChild(falseButton);

                    questionDiv.appendChild(optionsDiv);

                    const checkButton = document.createElement('button');
                    checkButton.className = 'check-answer';
                    checkButton.textContent = 'Check Answer';
                    checkButton.addEventListener('click', () => {
                        const selected = questionDiv.querySelector('.option-button.selected');
                        if (selected) {
                            // Check boolean answer correctly
                            const isCorrect = (selected.textContent === 'True' && q.answer === true) || (selected.textContent === 'False' && q.answer === false);
                            showFeedback(questionDiv, isCorrect, q.answer); // Pass boolean directly
                        } else {
                            showFeedback(questionDiv, false, q.answer); // Pass boolean directly
                        }
                    });
                    questionDiv.appendChild(checkButton);

                    tfContainer.appendChild(questionDiv);
                });
            }

            // --- Load Multiple Choice Questions ---
            function loadMultipleChoiceQuestions() {
                mcContainer.innerHTML = ''; // Clear previous content
                multipleChoice.forEach((q, index) => { // Added index
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    questionDiv.id = `mc-q-${index}`;

                    const questionText = document.createElement('p');
                    questionText.textContent = q.question;
                    questionDiv.appendChild(questionText);

                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';

                    // Shuffle options for variety (optional)
                    const shuffledOptions = [...q.options].sort(() => Math.random() - 0.5);

                    shuffledOptions.forEach(option => { // Use shuffled options
                        const optionButton = document.createElement('button');
                        optionButton.className = 'option-button';
                        optionButton.textContent = option;
                        optionButton.addEventListener('click', () => handleOptionSelection(optionButton, questionDiv));
                        optionsDiv.appendChild(optionButton);
                    });
                    questionDiv.appendChild(optionsDiv);

                    const checkButton = document.createElement('button');
                    checkButton.className = 'check-answer';
                    checkButton.textContent = 'Check Answer';
                    checkButton.addEventListener('click', () => {
                        const selected = questionDiv.querySelector('.option-button.selected');
                        if (selected) {
                            showFeedback(questionDiv, selected.textContent === q.answer, q.answer);
                        } else {
                             showFeedback(questionDiv, false, q.answer);
                        }
                    });
                    questionDiv.appendChild(checkButton);

                    mcContainer.appendChild(questionDiv);
                });
            }

            // --- Initial Load ---
            // Load all quiz questions initially so they are ready when tabs are clicked
            loadFillInTheBlankQuestions();
            loadTrueFalseQuestions();
            loadMultipleChoiceQuestions();


        }); // End DOMContentLoaded
        // --- END OF SCRIPT LOGIC ---
    </script>
</body>
</html>
